@startuml flow

!define RECTANGLE class

' 初期化: ローカルストレージからタスクを読み込む
start
:ローカルストレージからタスクを読み込む;
if (タスクが存在する) then (yes)
  :タスクを表示;
else (no)
  :タスクは空;
endif
stop

' タスク追加
start
:新しいタスクを入力;
if (タスクが空？) then (yes)
  :何もしない;
else (no)
  :タスクが重複？;
  if (重複している) then (yes)
    :警告メッセージを表示;
  else (no)
    :タスクを追加;
    :タスクをローカルストレージに保存;
    :成功メッセージを表示;
  endif
endif
:入力内容をクリア;
stop

' タスク削除
start
:選択されたタスクを削除;
if (選択タスクが存在？) then (yes)
  :選択したタスクを削除;
  :ローカルストレージから削除;
  :成功メッセージを表示;
else (no)
  :何もしない;
endif
stop

' 編集モーダル表示
start
:編集モーダルを開く;
:タスクを編集;
if (変更がある) then (yes)
  :タスクを更新;
  :ローカルストレージに保存;
  :成功メッセージを表示;
else (no)
  :何もしない;
endif
stop

' ページネーション処理
start
:現在のページを変更;
:ページを切り替える;
:表示するタスクを更新;
stop

' タスク表示件数変更
start
:タスク表示件数を変更;
:ページをリセット（1ページ目に戻す）;
stop

' ドラッグ＆ドロップ
start
:タスクをドラッグ開始;
:ドラッグしたタスクの位置を記録;
:ドラッグ方向を記録;
:ドラッグオーバー時、方向を確認;
if (ドラッグ位置が変更される) then (yes)
  :タスクの位置を変更;
  :ローカルストレージに保存;
else (no)
  :何もしない;
endif
stop

' タスク完了/未完了の更新
start
:タスク完了状態を更新;
if (タスク完了?) then (yes)
  :タスクに完了マークをつける;
else (no)
  :タスクの完了マークを外す;
endif
stop

' トーストメッセージ表示
start
:トーストメッセージを表示;
:指定されたメッセージとタイプに基づいて表示;
:一定時間後にメッセージを非表示;
stop

' タスク選択（チェックボックス）
start
:チェックボックスでタスクを選択;
if (選択されたタスクがある？) then (yes)
  :選択したタスクを管理;
else (no)
  :何もしない;
endif
stop

@enduml
